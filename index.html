<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoodReads Library Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <main class="main-content">
            <header class="app-header">
                <h1>GoodReads Library Explorer</h1>
                <p>A <a href="https://github.com/laccces" target="_blank">@laccces</a> website built to use your GoodReads data to give you some insights into what you have read, what you want to read, and what you should read next</p>
            </header>
            
            <section id="upload-section" class="content-card">
                <div class="card-header">
                    <h2>Import Your Library</h2>
                </div>
                
                <details class="export-instructions">
                    <summary>How to Export Your Goodreads Library</summary>
                    <div class="instructions-content">
                        <p class="platform-note"><strong>Note:</strong> Export must be done in a web browser. The Goodreads app does not support library export.</p>
                        
                        <div class="instruction-section">
                            <h4>Desktop</h4>
                            <ol>
                                <li>Log in to Goodreads.</li>
                                <li>Go to "My Books".</li>
                                <li>Click "Import and Export" in the left sidebar.</li>
                                <li>Click "Export Library".</li>
                                <li>Download the generated CSV file.</li>
                                <li>Upload it here.</li>
                            </ol>
                        </div>
                        
                        <div class="instruction-section">
                            <h4>Mobile (Browser)</h4>
                            <ol>
                                <li>Visit <a href="https://www.goodreads.com/review/import" target="_blank">https://www.goodreads.com/review/import</a> in your mobile browser (not the Goodreads app).</li>
                                <li>Log in if prompted.</li>
                                <li>Tap "Export Library".</li>
                                <li>Download the CSV file to your device.</li>
                                <li>Return here and upload it.</li>
                            </ol>
                        </div>
                        
                        <p class="privacy-note">This app runs entirely in your browser. Your data is not uploaded anywhere.</p>
                    </div>
                </details>
                
                <div class="upload-area">
                    <input type="file" id="csv-input" accept=".csv" class="file-input" />
                    <label for="csv-input" class="upload-label">
                        <span class="upload-icon">üìÅ</span>
                        <span class="upload-text">Click to select your CSV file</span>
                        <span class="upload-hint">Goodreads export or similar service</span>
                    </label>
                </div>
                
                <div class="sample-data-section">
                    <p class="sample-data-text">Don't have your Goodreads export yet?</p>
                    <button id="sample-data-btn" class="sample-data-btn">Try with Sample Data</button>
                </div>
            </section>

            <section id="analytics-section" class="content-card hidden">
                <div class="card-header">
                    <h2>Analytics</h2>
                </div>
                <div id="analytics-content"></div>
            </section>

            <section id="decision-engine-section" class="content-card hidden">
                <div class="card-header">
                    <h2>Book Recommender</h2>
                </div>
                <div id="decision-engine-content">
                    <div id="step-container">
                        <div id="step-1" class="decision-step">
                            <h3>Step 1: Time Investment</h3>
                            <p class="step-question">How much time do you want to invest?</p>
                            <div class="step-options">
                                <button class="step-btn" data-step="timeInvestment" data-value="quick">Quick read (&lt;300 pages)</button>
                                <button class="step-btn" data-step="timeInvestment" data-value="moderate">Moderate (300‚Äì500 pages)</button>
                                <button class="step-btn" data-step="timeInvestment" data-value="long">Long immersion (500+ pages)</button>
                                <button class="step-btn" data-step="timeInvestment" data-value="any">No preference</button>
                            </div>
                            <p class="candidate-count"></p>
                        </div>
                        
                        <div id="step-2" class="decision-step hidden">
                            <h3>Step 2: Familiar vs Different</h3>
                            <p class="step-question">Stick to what you love, or try something different?</p>
                            <div class="step-options">
                                <button class="step-btn" data-step="behaviourPreference" data-value="familiar">Stick to what I love</button>
                                <button class="step-btn" data-step="behaviourPreference" data-value="different">Try something different</button>
                                <button class="step-btn" data-step="behaviourPreference" data-value="any">No preference</button>
                            </div>
                            <button class="back-btn" data-step="1">Back</button>
                        </div>
                        
                        <div id="step-3" class="decision-step hidden">
                            <h3>Step 3: Backlog Age</h3>
                            <p class="step-question">Clear something old, or read something newly added?</p>
                            <div class="step-options">
                                <button class="step-btn" data-step="backlogPreference" data-value="old">Clear something old</button>
                                <button class="step-btn" data-step="backlogPreference" data-value="new">Read something newly added</button>
                                <button class="step-btn" data-step="backlogPreference" data-value="any">No preference</button>
                            </div>
                            <button class="back-btn" data-step="2">Back</button>
                        </div>
                        
                        <div id="step-4" class="decision-step hidden">
                            <h3>Step 4: Safety vs Risk</h3>
                            <p class="step-question">Highest rated, or slightly risky?</p>
                            <div class="step-options">
                                <button class="step-btn" data-step="riskPreference" data-value="safe">Highest rated</button>
                                <button class="step-btn" data-step="riskPreference" data-value="risky">Slightly risky</button>
                                <button class="step-btn" data-step="riskPreference" data-value="any">No preference</button>
                            </div>
                            <button class="back-btn" data-step="3">Back</button>
                        </div>
                        
                        <div id="step-result" class="decision-step hidden">
                            <div id="recommendation-result" class="recommendation-result"></div>
                            <button id="start-over-btn" class="recommend-btn">Start Over</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="app.js"></script>
</body>
</html>